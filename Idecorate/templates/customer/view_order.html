{% extends "base.html" %}
{% load idecorate_interface admin humanize %}
{{ request|set_last_page_idecorate }}
{% block title %}My Orders{% endblock %}
{%  block style %}
<link rel="stylesheet" type="text/css" href="/media/interface/css/orders.css">
{% endblock %}
{% block content %}
<h3>View Order</h3>
<div class="ordersWrap">
	<div class="viewOrder clearfix">
		<h4>Order ID: {{order.order_id}}</h4>
		<h4>Date Created: {{order.created}}</h4>
		<h4>Status: {{order.status|readable_status}}</h4>
		<div class="operation">
			<a id="print" target="blank" href="{% url hard_copy_order 0 order.id %}">Print</a> | <a id="pdf" target="blank" href="{% url hard_copy_order 1 order.id %}" >PDF</a>
		</div>
		<table class="info userProfile" border="0" cellpadding="0" cellspacing="0">
			<tr class="firstRow">
				<td class="label">First Name :</td>
				<td class="value">{{order.billing_first_name}}</td>
			</tr>
			<tr>
				<td class="label">Last Name :</td>
				<td class="value">{{order.billing_last_name}}</td>
			</tr>
			<tr>
				<td class="label">Email Address :</td>
				<td class="value">{{order.email}}</td>
			</tr>
			<tr>
				<td class="label">Contact Number :</td>
				<td class="value">{{order|get_order_detail:'contact_number'}}</td>
			</tr>
		</table>
		<table class="info userAddress" border="0" cellpadding="0" cellspacing="0">
			<tr class="firstRow">
				<td class="label">Delivery Date :</td>
				<td colspan="3" class="value">{{order|get_order_detail:"delivery_date"}}</td>
			</tr>
			<tr>
				<td class="label">Delivery Address :</td>
				<td class="value">{{order|get_order_detail:'delivery_address'}}</td>
				<td class="label">Billing Address :</td>
				<td class="value">{{order.billing_address}}</td>
			</tr>
			<tr>
				<td class="label">Delivery Address2 :</td>
				<td class="value">{{order|get_order_detail:'delivery_address2'}}</td>
				<td class="label">Billing Address2 :</td>
				<td class="value">{{order|get_order_detail:'billing_address2'}}</td>
			</tr>
			<tr>
				<td class="label">Delivery City :</td>
				<td class="value">{{order|get_order_detail:'delivery_city'}}</td>
				<td class="label">Billing City :</td>
				<td class="value">{{order.billing_city}}</td>
			</tr>
			<tr>
				<td class="label">Delivery State :</td>
				<td class="value">{{order|get_order_detail:'delivery_state'}}</td>
				<td class="label">Billing State :</td>
				<td class="value">{{order|get_order_detail:'billing_state'}}</td>
			</tr>
			<tr>
				<td class="label">Delivery Zip Code :</td>
				<td class="value">{{order|get_order_detail:'delivery_zip_code'}}</td>
				<td class="label">Billing Zip Code :</td>
				<td class="value">{{order.billing_zip_code}}</td>
			</tr>
			<tr>
				<td class="label">Delivery Country :</td>
				<td class="value">{{order|get_order_detail:'delivery_country'}}</td>
				<td class="label">Billing Country :</td>
				<td class="value">{{order|get_order_detail:'billing_country'}}</td>
			</tr>		
		</table>
		<table class="info userNotes" border="0" cellpadding="0" cellspacing="0">
			<tr class="firstRow">
				<td class="label">Payment Method :</td>
				<td class="value">{{order|get_order_detail:'payment_method'|readable_status_payment}}</td>
			</tr>
			<tr>
				<td class="label">Payment Notes :</td>
				<td class="value">{{order|get_order_detail:'note'}}</td>
			</tr>
			<tr>
				<td class="label">Order Notes :</td>
				<td class="value">{{order|get_order_detail:'note'}}</td>
			</tr>
		</table>
		<table class="order table table-bordered table-hover">
			<thead> 
				<tr>
					<th>Image</th>
					<th>Product name</th>
					<!-- <th>Comments</th> -->
					<th>Unit Price</th>
					<th>Quantity</th>
					<th>Total</th>
				</tr>
			</thead>
			<tbody>
				{% for order_item in order_items %}
				<tr>
					<td style="text-align:center;"><img src="/media/products/{{order_item.product.original_image_thumbnail}}" width="50" height="50" /></td>
					<td>{{order_item.name}}</td>
					<!-- <td>{{order_item.product|getProductDetail:'comment'}}</td> -->
					<td>${{order_item.unit_price|floatformat:2|intcomma}}</td>
					<td>{{order_item.quantity}}</td>
					<td>${{order_item.unit_price|multiply:order_item.quantity|floatformat:2|intcomma}}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		<table class="totalWrap" cellpadding="5">
			<tbody>
				<tr>
					<td style="text-align:right; width:80px;">Subtotal : </td>
					<td>${{order.items_subtotal|floatformat:2|intcomma}}</td>
				</tr>
				<tr>
					<td style="text-align:right; width:80px;">Delivery Fee : </td>
					<td>${{order.shipping_cost|floatformat:2|intcomma}}</td>
				</tr>
				<tr class="total">
					<td colspan="2">Total : ${{order.total|floatformat:2|intcomma}}</td>
				</tr>
				<tr class="backWrap">
					<td colspan="2" style="text-align:right; width:100px;">
						<button id="back" class="btn btn-inverse">Back</button>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>

{% endblock %}

{% block javascripts %}
<script type="text/javascript">
	$(function(){
		$('#back').click(function(e){
			var page = {{page}};
			if(page == 0){
				var url = '{% url orders %}';
			}else{
				var url = '{% url orders %}?page='+page;
			}
			{% if request.session.manage_order_redirect %}
				url = url+'{{ request.session.manage_order_redirect }}';
			{% endif %}
			window.location = url;
		});

		// $('.operation').on('click', 'a', function(e){
		// 	e.preventDefault();
		// });
	});
</script>
{% endblock %}
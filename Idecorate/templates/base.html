{% load i18n %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>{% block title %}{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="stylesheet" type="text/css" href="/media/interface/css/global.css">
        <link rel="stylesheet" type="text/css" href="/media/interface/css/home.css">
        <link rel="stylesheet" type="text/css" href="/media/interface/css/datepicker.css">
        <link rel="stylesheet" type="text/css" href="/media/interface/css/superfish.css">

        {%  block style %}{% endblock %}

        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <style>
        .ui-autocomplete-category {
            font-weight: bold;
            padding: .2em .4em;
            margin: .8em 0 .2em;
            line-height: 1.5;
        }
        #page-mask {
            position: fixed;
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
            filter: alpha(opacity=50);
            -moz-opacity: 0.5;
            -khtml-opacity: 0.5;
            opacity: 0.5;
            background-color: black;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 99999;
        }
        #modal-window {
            border: 5px solid #DDD;
            position: absolute;
            width: 800px;/*
            */
            height: auto;
            overflow: hidden;
            background-color: white;
            box-shadow: 0 0 8px #333;
            z-index: 99999;
            top: 10%;
        }
        #modal-window h2 {
            margin: 0 5px 0 0;
            padding: 0;
            text-align: right;
        }
        #modal-window iframe {
        /*height: 480px;*/
        min-height: 380px;
        max-height: 700px;
        width: 100%;
        }
        h2 {
            font-size: 156.25%;
        }
        h1, h2, h3, h4, h5 {
            font-weight: normal;
        }
        </style>
    </head>
    <body>
        <div id="main-container">
            <header id="header">
                {% include "header.html" %}
            </header>

            <div id="content">
                {% block content %}
                {% endblock %}
            </div>
            
            <footer id="footer" class="clearfix">
                {% include "footer.html" %}                
            </footer>
        </div> <!-- /container -->
        <div id="page-mask" style="display:none;"></div>
        <div id="modal-window" style="display:none;">
            <h2 id="modal-header">
                <a href="#" id="close-modal">&times;</a>
            </h2>
            <div id="iframe-wrap"></div>
        </div>  
        <script src="/media/interface/js/jquery-1.8.2.min.js"></script>
        <script src="/media/interface/js/jquery-ui.js"></script>
        <!-- <script src="/media/interface/js/dropdown/hoverIntent.js"></script>
        <script src="/media/interface/js/dropdown/jquery.dropdown.js"></script> -->
        <script src="/media/interface/js/hoverIntent.js"></script>
        <script src="/media/interface/js/superfish.js"></script>
        <script type="text/javascript">
            // initialise plugins
            jQuery(function(){
                jQuery('ul.dropdown').superfish({
                    onBeforeShow: function(e){
                        //alert('test');
                    }
                });
            }); 
            $(function() {
                $( "#datepicker" ).datepicker({
                    showOn: "button",
                    buttonImage: "http://jqueryui.com/resources/demos/datepicker/images/calendar.gif",
                    buttonImageOnly: true ,
                    changeMonth: true,
                    changeYear: true,
                    showOtherMonths: true,
                    selectOtherMonths: true,
                    showButtonPanel: true
                });
                $('#close-modal').click(closed_modal);

                $('#site-menu ul').append('<li><a href="#" id="lnk-login-signup">Login/Signup</a></li>');
                $('#site-menu ul a#lnk-login-signup').on('click',popup_login);
            });
            function closed_modal(){
                $('#page-mask').hide();
                $('#modal-window').hide();
            }
            function popup_login(){
                var iframe  = $('<iframe />').attr({'class':'modalIframe','id':'modal-iframe','src':"{% url login_signup %}"});
                var modal   = $('#modal-window'),
                    _left   = $(window).width()/2-modal.width()/2;
                    frame   = $('#iframe-wrap').html(iframe);

                $('#page-mask').css({display:'block'});
                modal.css({display:'block',left:_left});
            }
        </script>
        <script type="text/javascript">
        var SEARCH_SUGGESTION_URL = '{% url search_suggestions %}';
        </script>
        <script src="/media/interface/js/search.js"></script>
        {% block javascripts %}{% endblock %}
    </body>
</html>
